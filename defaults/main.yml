---
# defaults file for iptv_analyzer

iptv_analyzer_git_repo: 'https://github.com/bsmeding/IPTV-Analyzer'     # Repo of IPTV analyzer to install and build. Also used on database server to import schema

# Please install Grafana on forehand example: ansible-galaxy install cloudalchemy.grafana
grafana_server: ''    # Grafana server
grafana_server_install_dashboard: true   # Install IPTV dashboard on grafana server
grafana_server_dashboard_path: ''



# Database
iptv_analyzer_install_database: true    # When matches with inventory_hostname the database will be installed and this will be used in config files (of not overwritten with database IP)
iptv_analyzer_database_server_ip: ''  # when given, the IP address will be used in config files. Can be used if FQDN cannot be resolved or mysql cluster is used
iptv_analyzer_database_system_user:     # Database system user
  name: 'mysql'
  uid: 28
  gid: 28
  shell: '/sbin/nologin'
  home: '/var/lib/mysql'
  comment: 'MySQL Server'
iptv_analyzer_database_root_password: ''    # PLEASE CHANGE!! Root Password for MySQL
iptv_analyzer_database_install_frontend: false  # When true, node and a node web server will be installed on the database server. default false as we use grafana as frontend
iptv_analyzer_database_frontend_username: iptv_analyzer_fe
iptv_analyzer_database_frontend_port: 80
iptv_analyzer_database_install_packages:
  - mariadb-server
  - mariadb-client
  - python3-pymysql
iptv_analyzer_database_mariadb_socket: /var/run/mysqld/mysqld.sock
iptv_analyzer_database_user: 'tvprobe'              # default user Min 6 characters!, please use seperate accounts, see iptv_analyzer_collectors.
iptv_analyzer_database_password: 'tvprobepasswd'    # default user Min 6 characters!, please use seperate accounts, see iptv_analyzer_collectors
iptv_analyzer_database_bind_address: '127.0.0.1'    # Defaults install to localhost 127.0.0.1.
iptv_analyzer_database_name: 'tvprobe'
iptv_analyzer_database_init_script: 'database-schema-latest.sql'

#Collector
iptv_analyzer_install_collector: true
iptv_analyzer_collector_system_user:     # Database system user
  name: 'tvprobe'
  password: '$6$iptv_analyzer_pr$5raZ6QjNHCOw..48KU.YU1HewfAfw1S.lxWk0zpJcnGQm2WLzsT6ZZIh9aof4bE5gxGCm3DfIFFbHFZ4l.MXJ1'   # _Please create your own hashed password ansible all -i localhost, -m debug -a "msg={{ 'TVpr0b3' | password_hash('sha512', 'iptv_analyzer_probe') }}"
  uid: 800
  gid: 800
  home: '/home/tvprobe'
  comment: 'Collector deamon for IPTV analyzer'
iptv_analyzer_collector_cmd_kerel_version: 'uname -r'      # command to get kernel version of Linux, saved as 'kernel_version' variable
iptv_analyzer_collector_kernel_package: linux-headers-{{ kernel_version }}
iptv_analyzer_collector_install_packages:
  - autoconf
  - git
  - gcc
  - make
  - libxtables-dev
  - libproc-daemon-perl
  - libproc-pid-file-perl
  - libconfig-file-perl
  - libdata-compare-perl
  - liblog-log4perl-perl
  - libnet-snmp-perl
  - liblog-dispatch-perl
  - mariadb-client
iptv_analyzer_collector_interface: 'eth0'
iptv_analyzer_collectors:
  - hostname: 'localhost'
    description: 'localhost test device'
    ip_address: '127.0.0.1'
    location: 'local machine'
    shortloc: 'local'
    address: 'test street 1'
    distance: 2
    switch: 'testswitch1'
    switchport: 'e1/2'
    switchtype: 'Genexis'
    hidden: no
    interface: eth0       # used for rpbe: input rule_in_eth0 and input_dev and procfile
    db_user: probe1
    db_password: password1
